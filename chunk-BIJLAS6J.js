import{C as l,E as c,G as v,H as I,I as _,J as x,K as g,L as h,M as s,N as F,O as q,P as C,Q as u,R as S,S as T,Y as a,fa as D,ga as M,ja as k,ma as w,o as r,v as d,y as p,z as y}from"./chunk-EE4OEHPH.js";var O=(()=>{let e=class e{constructor(i){this.router=i}goToNextSequence(){this.router.navigate([this.choice.nextSequence])}};e.\u0275fac=function(n){return new(n||e)(y(w))},e.\u0275cmp=r({type:e,selectors:[["tn-choice"]],inputs:{choice:"choice"},standalone:!0,features:[a],decls:2,vars:1,consts:[[3,"click"]],template:function(n,o){n&1&&(g(0,"button",0),C("click",function(){return o.goToNextSequence()}),S(1),h()),n&2&&(p(),T(o.choice.buttonLabel))},encapsulation:2});let t=e;return t})();function z(t,e){if(t&1&&s(0,"img",0),t&2){let m=u();c("ngSrc",m.image.file)}}function U(t,e){if(t&1&&s(0,"img",1),t&2){let m=u();c("ngSrc",m.currentFile)}}function $(t,e){if(t&1&&s(0,"audio",2),t&2){let m=u();c("src",m.image.soundEffect,d)}}var N=(()=>{let e=class e{set image(i){this._image=i,this.isAnimatedImage(i)&&(this.currentFile=i.files[0])}get image(){return this._image}ngOnInit(){if(this.isAnimatedImage(this.image)){let i=0,n=this.image.duration||1e3;this.intervalId=setInterval(()=>{i=(i+1)%this.image.files.length,this.currentFile=this.image.files[i],console.log("Current file:",this.currentFile)},n)}}ngOnDestroy(){this.intervalId&&window.clearInterval(this.intervalId)}isStaticImage(i){return i.file!==void 0}isAnimatedImage(i){return i.files!==void 0}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=r({type:e,selectors:[["tn-image"]],inputs:{image:"image"},standalone:!0,features:[a],decls:3,vars:2,consts:[["alt","image.file","fill","",3,"ngSrc"],["alt","file","fill","",3,"ngSrc"],["autoplay","",3,"src"]],template:function(n,o){n&1&&l(0,z,1,1,"img",0)(1,U,1,1,"img",1)(2,$,1,1,"audio",2),n&2&&(v(o.isStaticImage(o.image)?0:o.isAnimatedImage(o.image)?1:-1),p(2),v(o.image.soundEffect?2:-1))},dependencies:[k],encapsulation:2});let t=e;return t})();var B=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=r({type:e,selectors:[["tn-music"]],inputs:{music:"music"},standalone:!0,features:[a],decls:1,vars:1,consts:[["autoplay","",3,"src"]],template:function(n,o){n&1&&s(0,"audio",0),n&2&&c("src",o.music.file,d)},encapsulation:2});let t=e;return t})();function j(t,e){if(t&1&&s(0,"tn-image",4),t&2){let m=u().$implicit;c("image",m)}}function L(t,e){if(t&1&&(F(0),l(1,j,1,1,"tn-image",3),q()),t&2){let m=e.index,i=u();p(),c("ngIf",m===i.currentIndex)}}var E=(()=>{let e=class e{constructor(){this.currentIndex=0}nextImage(){this.currentIndex<this.sequence.images.length-1&&this.currentIndex++}trackByFn(i,n){return i}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=r({type:e,selectors:[["tn-sequence"]],inputs:{sequence:"sequence"},standalone:!0,features:[a],decls:3,vars:3,consts:[[3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"music"],[3,"image",4,"ngIf"],[3,"image"]],template:function(n,o){n&1&&(g(0,"div",0),C("click",function(){return o.nextImage()}),l(1,L,2,1,"ng-container",1),s(2,"tn-music",2),h()),n&2&&(p(),c("ngForOf",o.sequence.images)("ngForTrackBy",o.trackByFn),p(),c("music",o.sequence.music))},dependencies:[N,B,D,M],encapsulation:2});let t=e;return t})();function R(t,e){if(t&1&&s(0,"tn-choice",1),t&2){let m=e.$implicit;c("choice",m)}}var b=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=r({type:e,selectors:[["tn-step"]],inputs:{step:"step"},standalone:!0,features:[a],decls:3,vars:1,consts:[[3,"sequence"],[3,"choice"]],template:function(n,o){n&1&&(s(0,"tn-sequence",0),_(1,R,1,1,"tn-choice",1,I)),n&2&&(c("sequence",o.step.sequence),p(),x(o.step.choices))},dependencies:[E,O],encapsulation:2});let t=e;return t})();var ie=(()=>{let e=class e{constructor(){this.step={name:"Coffee",index:0,sequence:{images:[{file:"/sequences/coffee/img/1.png",soundEffect:"/sequences/coffee/sound/copains_copines.m4a"},{file:"/sequences/coffee/img/2.png"},{file:"/sequences/coffee/img/3.png"},{files:["/sequences/coffee/img/4.png","/sequences/coffee/img/5.png"],duration:1e3},{file:"/sequences/coffee/img/choice.png"}],music:{name:"Blues",file:"/sequences/coffee/sound/blues.mp3"}},choices:[]}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=r({type:e,selectors:[["tn-coffee"]],standalone:!0,features:[a],decls:1,vars:1,consts:[[3,"step"]],template:function(n,o){n&1&&s(0,"tn-step",0),n&2&&c("step",o.step)},dependencies:[b],encapsulation:2});let t=e;return t})();export{ie as CoffeeComponent};
